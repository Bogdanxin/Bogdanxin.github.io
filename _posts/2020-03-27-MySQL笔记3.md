---
layout:   	post
title: 		mysql连接查询
subtitle: 	mysql笔记3
date:		2020-03-27
catalog:	true
author:		BogdanXin
tags:
- MySQL
---

# 连接查询

**含义：**又称之为多表查询，当查询的字段来自于多个表时，就会用到连接查询

**笛卡尔乘积现象：**表1有m行， 表2有n行，结果=m*n行

* 发生原因：没有有效的连接条件

* 如何避免：添加有效的连接条件

## 1.sql92标准

### 1.1 等值连接

```sql
select name, boyName
from boys, beauty
where beauty.boyfriend_id = boys.id;
```

### 1.2 为表起别名

* 提高语句简洁度
* 区分多个重名的字段

注意：如果为表起了别名，则查询的字段就不能使用原来的表明去限定

```sql
select last_name, e.job, job_title
from employees e, jobs j
where e.job_id = j.job_id;
```

### 1.3 两个表的顺序可以调换

### 1.4 可以加筛选

用到and连接

### 1.5 可以加分组

```sql
select count(*) , city
from department d, location l
where d.location_id = l.location_id
group by city;
```

### 1.6 可以加排序

```sql
select job_title, count(*)
from employees e, jobs j
where e.job_id = j.job_id
group by job_title
order by count(*) desc;
```

### 1.7 可以实现三表连接

```sql
select last_name, department_name, city
from employees e, department d, location l
where e.job_id = d.job_id
and d.location_id = j.location_id
and city like '%s'
order by department_name;
```

### 总结：

1. 多表等值连接的结果为多表交集部分
2. n表连接，至少需要n-1个连接条件
3. 多表的顺序没有要求
4. 一般需要为表起别名
5. 可以搭配前面介绍的所有子句使用，比如排序、分组、筛选

